<powerpagecomponent powerpagecomponentid="238bbe60-6661-ee11-be6e-0022482a9ca6">
  <content>{
  "copy": "{% include 'Portal Web API Wrapper' %}\r\n&lt;div class=\"row sectionBlockLayout\"&gt;\r\n  &lt;div class=\"container\"&gt;\r\n    &lt;div class=\"col-md-12 columnBlockLayout\"&gt;{% entityform name: 'Add Attendee' %}{{ snippets['Attendee Required Field'] }}&lt;/div&gt;\r\n  &lt;/div&gt;\r\n&lt;/div&gt;",
  "customcss": "div.navbar {display: none;}\r\ninput#InsertButton {display: none;}\r\n.form-control{\r\n    background-color: #F2F2F2;\r\n}\r\ninput#birthdate_datepicker_description {\r\n    border-radius: 10px 0 0 10px;\r\n}\r\n.input-append.input-group.datetimepicker {\r\n    width: 100%;\r\n}",
  "customjavascript": " $(\".actions\").append(\"&lt;button class='btn button2' id='cancelChildButton'&gt;Cancel&lt;/div&gt;\");\r\n    $(\".validation-summary.alert.alert-error.alert-danger.alert-block\").addClass('validation-alert');\r\n\r\n\r\n    $(\"#cancelChildButton\").click(function(e){\r\n        e.preventDefault();\r\n        window.parent.closeModal();\r\n    });\r\n\r\n    \r\n    var documentbodyContents;\r\n    var attendeeImageType;\r\n    var attendeeImageName = '';\r\n\r\n    //File upload function called by the PCF\r\n    window.uploadImagePCF = function (name, memetype, body) {\r\n        attendeeImageType = memetype;\r\n        attendeeImageName = name;\r\n        documentbodyContents = body.substring(body.indexOf(',') + 1);           \r\n    }\r\n\r\n    // Apply Client Side Validation on birthdate\r\n    if (window.jQuery) {\r\n    (function ($) {\r\n        $(document).ready(function () {\r\n            if (typeof (Page_Validators) == 'undefined') return;\r\n            // Create new validator\r\n            var newValidator = document.createElement('span');\r\n            newValidator.style.display = \"none\";\r\n            newValidator.id = \"birthdateValidator\";\r\n            newValidator.controltovalidate = \"birthdate\";\r\n            newValidator.errormessage = \"&lt;a href='#birthdate_label'&gt;{{snippets['Error/Future DOB']}}&lt;/a&gt;\";\r\n            newValidator.validationGroup = \"\"; // Set this if you have set ValidationGroup on the form\r\n            newValidator.initialvalue = \"\";\r\n            newValidator.evaluationfunction = function () {\r\n                var birthdateValue = moment(document.getElementById(\"birthdate\").value); \r\n                if (moment(birthdateValue).isAfter(moment()))          \r\n                    return false;  // return false mean apply validation            \r\n                else \r\n                    return true;   // return true mean successful         \r\n            };\r\n            // Add the new validator to the page validators array:\r\n            Page_Validators.push(newValidator);\r\n            // Wire-up the click event handler of the validation summary link\r\n            $(\"a[href='#birthdate_label']\").on(\"click\", function () { scrollToAndFocus('birthdate_label','Birthdate'); });\r\n        });\r\n    }(window.jQuery));\r\n    }\r\n\r\n    function addChildProfile() {\r\n        var bDate = null;\r\n        if (document.getElementById(\"birthdate_datepicker_description\").value){\r\n            bDate = moment(Date.parse(document.getElementById(\"birthdate_datepicker_description\").value)).format('YYYY-MM-DD');\r\n        } \r\n\r\n        //Create child data object\r\n        var firstName = \"\";\r\n        var lastName = \"\";\r\n        if (document.getElementById(\"firstname\").value)\r\n            firstName = document.getElementById(\"firstname\").value\r\n        if (document.getElementById(\"lastname\").value)\r\n            lastName = document.getElementById(\"lastname\").value\r\n        let dataObject = {\r\n            \"firstname\": firstName,\r\n            \"lastname\": lastName,\r\n            \"birthdate\": bDate,\r\n            \"parentcustomerid_contact@odata.bind\": \"/contacts({{user.contactid}})\"\r\n        }\r\n\r\n        if (documentbodyContents){\r\n          dataObject['entityimage'] =  documentbodyContents;\r\n          dataObject['msdynce_entityimage_file_name'] = attendeeImageName;\r\n          dataObject['msdynce_entityimage_file_type'] = attendeeImageType.substring(attendeeImageType.indexOf('/') + 1);\r\n        }\r\n\r\n\r\n        //Call the API\r\n        webapi.safeAjax({\r\n            type: \"POST\",\r\n            url: \"/_api/contacts\",\r\n            contentType: \"application/json\",\r\n            data: JSON.stringify(dataObject),\r\n            success: function (res, status, xhr) {\r\n                window.top.location.reload();                 \r\n            },\r\n            error: function (res, status, xhr) {\r\n                console.log(res.responseText);\r\n            }\r\n        });\r\n    }",
  "displayorder": 14,
  "enablerating": false,
  "enabletracking": false,
  "excludefromsearch": false,
  "feedbackpolicy": 756150000,
  "hiddenfromsitemap": false,
  "isroot": false,
  "pagetemplateid": "63cd665a-6661-ee11-be6e-0022482a9ca6",
  "parentpageid": "c9ec5562-6661-ee11-be6e-0022482a9f76",
  "partialurl": "add-attendee",
  "publishingstateid": "9562e260-6661-ee11-be6e-0022482a998f",
  "rootwebpageid": "d062e260-6661-ee11-be6e-0022482a998f",
  "sharedpageconfiguration": true,
  "summary": "&lt;p&gt;This is sample landing page for you to start building your website&lt;/p&gt;",
  "title": "Add Attendee Profile"
}</content>
  <iscustomizable>1</iscustomizable>
  <name>Add Attendee Profile</name>
  <powerpagecomponenttype>2</powerpagecomponenttype>
  <powerpagesiteid>
    <powerpagesiteid>d8ec5562-6661-ee11-be6e-0022482a9f76</powerpagesiteid>
  </powerpagesiteid>
  <powerpagesitelanguageid>
    <powerpagesitelanguageid>b8f67061-6661-ee11-be6e-0022482a91f4</powerpagesitelanguageid>
  </powerpagesitelanguageid>
  <searchcontent>Add Attendee Profile{% include 'Portal Web API Wrapper' %}
&lt;div class="row sectionBlockLayout"&gt;
  &lt;div class="container"&gt;
    &lt;div class="col-md-12 columnBlockLayout"&gt;{% entityform name: 'Add Attendee' %}{{ snippets['Attendee Required Field'] }}&lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;Add Attendee Profile</searchcontent>
  <statecode>0</statecode>
  <statuscode>1</statuscode>
</powerpagecomponent>