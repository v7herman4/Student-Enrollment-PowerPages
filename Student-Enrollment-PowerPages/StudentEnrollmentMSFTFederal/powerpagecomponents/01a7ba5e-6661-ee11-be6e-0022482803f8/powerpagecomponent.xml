<powerpagecomponent powerpagecomponentid="01a7ba5e-6661-ee11-be6e-0022482803f8">
  <content>{
  "copy": "{% include 'Portal Web API Wrapper' %}\n&lt;div class=\"row sectionBlockLayout\" style=\"display: flex; flex-wrap: wrap; padding: 8px; margin: 0px; text-align: left; min-height: 100px;\"&gt;\n  &lt;div class=\"container\"&gt;\n    &lt;div id=\"header\" class=\"col-md-12\" style=\"flex-grow: 1; display: flex; flex-direction: column; min-width: 300px; align-items: center;\"&gt;\n      &lt;h2&gt;My registrations&lt;/h2&gt;\n      &lt;br /&gt;\n      &lt;p&gt;Registrations for all 202X-2025 school events&lt;/p&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n&lt;div class=\"row sectionBlockLayout text-left\" style=\"display: flex; flex-wrap: wrap; margin: 0px; min-height: auto; padding: 8px;\"&gt;\n  &lt;div class=\"container\" style=\"padding: 0px; display: flex; flex-wrap: wrap;\"&gt;&lt;div class=\"col-md-12 columnBlockLayout\" style=\"flex-grow: 1; display: flex; flex-direction: column; min-width: 250px; word-break: break-word;\"&gt;{% include 'entity_list' key: 'Student Enrollments' %}&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;!-- Unregister modal --&gt;\n&lt;dialog id=\"unregisterDialog\" class=\"modal-content nativeModal\"&gt;\n  &lt;div class=\"modal-header\"&gt;&lt;h2 class=\"modal-title\"&gt;Cancel registration?&lt;/h2&gt;&lt;/div&gt;\n  &lt;form method=\"dialog\"&gt;&lt;iframe frameborder=\"0\" width=\"100%\" height=\"auto\" id=\"unregister-wrapper-iframe\" allowfullscreen=\"\" src=\"https://www.bing.com\"&gt;&lt;/iframe&gt;&lt;button value=\"cancel\" class=\"modalCloser\"&gt;Close Dialog&lt;/button&gt;&lt;/form&gt;\n&lt;/dialog&gt;\n&lt;!--\n  &lt;p&gt;\n    &lt;button aria-label=\"Add Attendee Button\" id=\"updateDetails\"&gt;Add Attendee&lt;/button&gt;\n  &lt;/p&gt;\n--&gt;&lt;output\n&gt;&lt;/output\n&gt;&lt;!-- @end Unregister modal --&gt;\n",
  "customcss": "/* pagination */\r\ndiv.view-pagination {\r\n  order: 1;\r\n  width: 100%;\r\n  height: 45px;\r\n  text-align: center;\r\n}\r\n\r\ndiv.pagination {\r\n  float: none;\r\n}\r\n\r\n.pagination&gt;li:first-child &gt; a, .pagination&gt;li:last-child &gt; a {\r\n  border: 1px solid #404040;\r\n  border-radius: 50%;\r\n}\r\n.pagination&gt;.disabled&gt;span, .pagination&gt;.disabled&gt;span:hover, .pagination&gt;.disabled&gt;span:focus, .pagination&gt;.disabled&gt;a, .pagination&gt;.disabled&gt;a:hover, .pagination&gt;.disabled&gt;a:focus {\r\n  background: transparent;\r\n}\r\n.pagination &gt; li &gt; a, .pagination &gt; li &gt; span {\r\n  width: 20px;\r\n  height: 20px;\r\n  padding: 0px 5px;\r\n  margin: 0;\r\n}\r\n.pagination &gt; li &gt; a {\r\n  font-size: 12px;\r\n  color: #404040;\r\n  font-weight: 500;\r\n}\r\n\r\n.pagination&gt;.active&gt;a, .pagination&gt;.active&gt;a:hover, .pagination&gt;.active&gt;a:focus, .pagination&gt;.active&gt;span, .pagination&gt;.active&gt;span:hover, .pagination&gt;.active&gt;span:focus {\r\n  background-color: transparent;\r\n  color: #BF7560;\r\n  font-weight: 700;\r\n  border: none;\r\n}\r\n.pagination &gt; li &gt; a, .pagination &gt; li &gt; span {\r\n  width: 20px;\r\n  height: 20px;\r\n  padding: 0px 5px;\r\n  margin: 0;\r\n}\r\n.pagination &gt; li &gt; a {\r\n  font-size: 12px;\r\n  color: #404040;\r\n  font-weight: 500;\r\n}\r\n\r\n",
  "customjavascript": "// Allows close modal from the popup  \r\nwindow.closeModal = function() {\r\n    $('#unregisterModal').modal('hide');\r\n};\r\n\r\n$(function() {\r\n    $(document).ready(function() {\r\n        var active = sessionStorage.getItem(\"aspFocused\");\r\n        if (active) {\r\n            e = document.getElementById(active).focus();\r\n        }\r\n    });\r\n\r\n    var seasonFilter = \"{{request.params['season'] | xml_escape }}\";\r\n    var attendeeFilterString = \"{{request.params['attendees'] | xml_escape }}\";\r\n    var attendeeFilterArray;\r\n\r\n    if (attendeeFilterString != \"\" &amp;&amp; attendeeFilterString.includes(\",\"))\r\n        attendeeFilterArray = attendeeFilterString.split(\",\")\r\n    else if (attendeeFilterString != \"\")\r\n        attendeeFilterArray = [attendeeFilterString];\r\n    else\r\n        attendeeFilterArray = [];\r\n\r\n\r\n    // Get the course image\r\n    $(\".card-flex-right\").each(function() {\r\n        let imgURL = \"\";\r\n        const courseid = this.dataset.courseid;\r\n        const regid = this.dataset.regid;\r\n        webapi.safeAjax({\r\n            type: \"GET\",\r\n            url: \"/_api/msdynce_courses(\" + courseid + \")/msdynce_entityimage/?size=full\",\r\n            contentType: \"application/json\",\r\n            success: function(res, status) {\r\n                let imgHTML = \"\";\r\n                if (res) {\r\n                    imgURL = \"data:image/png;base64,\" + res.value;\r\n                    imgHTML = \"&lt;img class='image-right'  src=\" + imgURL + \"  alt='course photo'&gt;\";\r\n                } else {\r\n                    imgHTML = \"&lt;img class='image-right'  src='/card-placeholder.svg'  alt='course photo'&gt;\";\r\n                }\r\n                $(\"#div\" + regid).append(imgHTML);\r\n            }\r\n        });\r\n\r\n    });\r\n\r\n    // Load user's card image\r\n    $(\".sub-left img\").each(function() {\r\n        loadImage(this.dataset.attendee, this);\r\n    });\r\n\r\n    // Load user's mobile card image\r\n    $(\".mobile-right img\").each(function() {\r\n        loadImage(this.dataset.attendee, this);\r\n    });\r\n\r\n    // Load user's image\r\n    $(\".child-filter-card img:not(.child-filter-card img:first-child)\").each(function() {\r\n        loadImage(this.dataset.contact, this);\r\n    });\r\n\r\n\r\n    //Load checked attendees\r\n    for (let a = 0; a &lt; attendeeFilterArray.length; a++) {\r\n        $(\"input[class='checkAttendeeMobile'][value='\" + attendeeFilterArray[a] + \"']\").parent().addClass(\"filterSelected\");\r\n        $(\"input[class='checkAttendeeMobile'][value='\" + attendeeFilterArray[a] + \"']\").prop('checked', true);\r\n        $(\"input[class='checkAttendee'][value='\" + attendeeFilterArray[a] + \"']\").prop('checked', true);\r\n    }\r\n\r\n\r\n    /* START ATTENDEE FILTER */\r\n    $(\".child-filter input[type='checkbox']\").on(\"change\", function() {\r\n        //resetForFilter();\r\n        if (this.checked) {\r\n            attendeeFilterArray.push(this.value);\r\n            $(\"input[class='checkAttendeeMobile'][value='\" + this.value + \"']\").parent().addClass(\"filterSelected\");\r\n            $(\"input[class='checkAttendeeMobile'][value='\" + this.value + \"']\").prop('checked', true);\r\n\r\n        } else {\r\n            $(\"input[class='checkAttendeeMobile'][value='\" + this.value + \"']\").parent().removeClass(\"filterSelected\");\r\n            $(\"input[class='checkAttendeeMobile'][value='\" + this.value + \"']\").prop('checked', false);\r\n            const pos = attendeeFilterArray.indexOf(this.value);\r\n            attendeeFilterArray.splice(pos, 1);\r\n        }\r\n        var elemId = this.id;\r\n        sessionStorage.setItem(\"aspFocused\", elemId);\r\n        attendeeFilterString = arrayToString(attendeeFilterArray);\r\n        buildUrl(seasonFilter, attendeeFilterString);\r\n    });\r\n\r\n    /* START ATTENDEE MOBILE FILTER */\r\n    $('.checkAttendeeMobile').on(\"change\", function() {\r\n        if (this.checked) {\r\n            $(this).parent().addClass(\"filterSelected\");\r\n            attendeeFilterArray.push(this.value);\r\n            $(\"input[class='checkAttendee'][value='\" + this.value + \"']\").prop('checked', true);\r\n        } else {\r\n            $(this).parent().removeClass(\"filterSelected\");\r\n            const pos = attendeeFilterArray.indexOf(this.value);\r\n            attendeeFilterArray.splice(pos, 1);\r\n            $(\"input[class='checkAttendee'][value='\" + this.value + \"']\").prop('checked', false);\r\n        }\r\n    });\r\n\r\n    /* HANDLE APPLY IN MOBILE FILTER */\r\n    $('#applyAttendee').on(\"click\", function() {\r\n        attendeeFilterString = arrayToString(attendeeFilterArray);\r\n        buildUrl(seasonFilter, attendeeFilterString);\r\n    });\r\n\r\n    $(document).on('click', '.dropdown-filters .dropdown-menu', function(e) {\r\n        e.stopPropagation();\r\n    });\r\n\r\n\r\n    //Keep the filter dropdowns from collapsing after clicking an option\r\n    $(document).on('click', '.catalog-dropdown-filters .dropdown-menu', function(e) {\r\n        e.stopPropagation();\r\n    });\r\n\r\n    $(\"#courseSeason+ul li\").on(\"click\", function() {\r\n        seasonFilter = this.dataset.val;\r\n        buildUrl(seasonFilter, attendeeFilterString);\r\n    });\r\n\r\n    //Season filter\r\n    $(\"#applySeasonCatalog\").on(\"click\", function() {\r\n        //Get the selected season value\r\n        const selectedSeason = $(\"input:radio[name='SeasonMobile']:checked\").val();\r\n        seasonFilter = selectedSeason;\r\n        buildUrl(seasonFilter, attendeeFilterString);\r\n    });\r\n\r\n    $('.radioSeasonMobile').on(\"change\", function() {\r\n        if (this.checked) {\r\n            $('input[name=\"SeasonMobile\"]').parent().removeClass(\"filterSelected\");\r\n            $(this).parent().addClass(\"filterSelected\");\r\n        } else\r\n            $(this).parent().removeClass(\"filterSelected\");\r\n    });\r\n\r\n    //Search\r\n    $(\"#btnsearch\").on(\"click\", function() {\r\n        const txt = $(\"#txtsearch\");\r\n        buildUrlSearch(txt.val());\r\n    });\r\n\r\n    $('#txtsearch').on(\"change\", function() {\r\n        if (this.value.length == 0) {\r\n            let url = window.location.href;\r\n            url = url.replace(window.location.search, \"\");\r\n            if (url != \"\")\r\n                window.location.href = url;\r\n        }\r\n    });\r\n});\r\n\r\nfunction loadImage(objectId, selector) {\r\n    var imgURL = \"\";\r\n    webapi.safeAjax({\r\n        type: \"GET\",\r\n        url: \"/_api/contacts(\" + objectId + \")?$select=entityimage\",\r\n        contentType: \"application/json\",\r\n        success: function(res, status) {\r\n            if (res.entityimage) {\r\n                var imgBaseString = res.entityimage;\r\n                var imgHTML = \"\";\r\n                imgURL = \"data:image/png;base64,\" + imgBaseString;\r\n                $(selector).attr(\"src\", imgURL);\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\nfunction changeParameterValue(url, parameter, newValue) {\r\n    if (url.includes(parameter)) {\r\n        const i = url.indexOf(parameter) + parameter.length;\r\n        url = replaceAt(url, i, newValue);\r\n    }\r\n    return url;\r\n}\r\n\r\nfunction replaceAt(str, index, replacement) {\r\n    return str.substr(0, index) + replacement + str.substr(index + replacement.length);\r\n}\r\n\r\n//Season filter and Search\r\nfunction buildUrl(season, attendees) {\r\n    let queryUrl = window.location.href;\r\n    //Remove all queries\r\n    queryUrl = queryUrl.replace(window.location.search, \"\");\r\n    //Set the page to 1\r\n    queryUrl = queryUrl + \"?page=1\";\r\n\r\n    if (season &amp;&amp; season != \"\")\r\n        queryUrl = queryUrl + \"&amp;season=\" + season;\r\n    if (attendees &amp;&amp; attendees != \"\")\r\n        queryUrl = queryUrl + \"&amp;attendees=\" + attendees;\r\n\r\n    window.location.href = queryUrl;\r\n}\r\n\r\nfunction buildUrlSearch(search) {\r\n    let queryUrl = window.location.href;\r\n    //Remove all queries\r\n    queryUrl = queryUrl.replace(window.location.search, \"\");\r\n    //Set the page to 1\r\n    queryUrl = queryUrl + \"?page=1\";\r\n\r\n    if (search &amp;&amp; search != \"\")\r\n        queryUrl = queryUrl + \"&amp;search=\" + search;\r\n\r\n    window.location.href = queryUrl;\r\n}\r\n\r\nfunction arrayToString(arrayVar) {\r\n    var stringVar = \"\";\r\n    arrayVar.forEach(function(element, i, array) {\r\n        var auxString = arrayVar[i].toString();\r\n        if (i == 0)\r\n            stringVar = auxString;\r\n        else\r\n            stringVar = stringVar + \",\" + auxString;\r\n    });\r\n    //If nothing was selected, set the variable to null or the API will throw an error\r\n    if (stringVar == \"\")\r\n        stringVar = null;\r\n\r\n    return stringVar;\r\n}\r\n\r\nconst updateButton = document.getElementById('updateDetails');\r\nconst unregisterDialog = document.getElementById('unregisterDialog');\r\nconst outputBox = document.querySelector('output');\r\n\r\n// If a browser doesn't support the dialog, then hide the\r\n// dialog contents by default.\r\nif (typeof unregisterDialog.showModal !== 'function') {\r\n  unregisterDialog.hidden = true;\r\n  /* a fallback script to allow this dialog/form to function\r\n     for legacy browsers that do not support &lt;dialog&gt;\r\n     could be provided here.\r\n  */\r\n}\r\n// \"Update details\" button opens the &lt;dialog&gt; modally\r\nupdateButton.addEventListener('click', () =&gt; {\r\n  if (typeof unregisterDialog.showModal === \"function\") {\r\n    unregisterDialog.showModal();\r\n  } else {\r\n    outputBox.value = \"Sorry, the &lt;dialog&gt; API is not supported by this browser.\";\r\n  }\r\n});\r\n\r\n// \"Confirm\" button of form triggers \"close\" on dialog because of [method=\"dialog\"]\r\nunregisterDialog.addEventListener('close', () =&gt; {\r\n  outputBox.value = `${unregisterDialog.returnValue} button clicked - ${(new Date()).toString()}`;\r\n});\r\n\r\n\r\nfunction showUnregisterModal(registrationId) {\r\n    $('#unregister-wrapper-iframe').attr('src', '/unregister-attendee?id=' + registrationId);\r\n    if (typeof unregisterDialog.showModal === \"function\") {\r\n        unregisterDialog.showModal();\r\n      } else {\r\n        outputBox.value = \"Sorry, the &lt;dialog&gt; API is not supported by this browser.\";\r\n      }\r\n}",
  "displayorder": 4,
  "enablerating": false,
  "enabletracking": false,
  "excludefromsearch": false,
  "feedbackpolicy": 756150000,
  "hiddenfromsitemap": false,
  "isroot": false,
  "pagetemplateid": "63cd665a-6661-ee11-be6e-0022482a9ca6",
  "parentpageid": "c9ec5562-6661-ee11-be6e-0022482a9f76",
  "partialurl": "my-registrations",
  "publishingstateid": "9562e260-6661-ee11-be6e-0022482a998f",
  "rootwebpageid": "abf67061-6661-ee11-be6e-0022482a91f4",
  "sharedpageconfiguration": true,
  "summary": "&lt;p&gt;This is sample landing page for you to start building your website&lt;/p&gt;",
  "title": "My Registrations"
}</content>
  <iscustomizable>1</iscustomizable>
  <name>My Student Application</name>
  <powerpagecomponenttype>2</powerpagecomponenttype>
  <powerpagesiteid>
    <powerpagesiteid>d8ec5562-6661-ee11-be6e-0022482a9f76</powerpagesiteid>
  </powerpagesiteid>
  <powerpagesitelanguageid>
    <powerpagesitelanguageid>b8f67061-6661-ee11-be6e-0022482a91f4</powerpagesitelanguageid>
  </powerpagesitelanguageid>
  <searchcontent>My Registrations{% include 'Portal Web API Wrapper' %}
&lt;div class="row sectionBlockLayout" style="display: flex; flex-wrap: wrap; padding: 8px; margin: 0px; text-align: left; min-height: 100px;"&gt;
  &lt;div class="container"&gt;
    &lt;div id="header" class="col-md-12" style="flex-grow: 1; display: flex; flex-direction: column; min-width: 300px; align-items: center;"&gt;
      &lt;h2&gt;My registrations&lt;/h2&gt;
      &lt;br /&gt;
      &lt;p&gt;Registrations for all 202X-2025 school events&lt;/p&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;
&lt;div class="row sectionBlockLayout text-left" style="display: flex; flex-wrap: wrap; margin: 0px; min-height: auto; padding: 8px;"&gt;
  &lt;div class="container" style="padding: 0px; display: flex; flex-wrap: wrap;"&gt;&lt;div class="col-md-12 columnBlockLayout" style="flex-grow: 1; display: flex; flex-direction: column; min-width: 250px; word-break: break-word;"&gt;{% include 'entity_list' key: 'Student Enrollments' %}&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Unregister modal --&gt;
&lt;dialog id="unregisterDialog" class="modal-content nativeModal"&gt;
  &lt;div class="modal-header"&gt;&lt;h2 class="modal-title"&gt;Cancel registration?&lt;/h2&gt;&lt;/div&gt;
  &lt;form method="dialog"&gt;&lt;iframe frameborder="0" width="100%" height="auto" id="unregister-wrapper-iframe" allowfullscreen="" src="https://www.bing.com"&gt;&lt;/iframe&gt;&lt;button value="cancel" class="modalCloser"&gt;Close Dialog&lt;/button&gt;&lt;/form&gt;
&lt;/dialog&gt;
&lt;!--
  &lt;p&gt;
    &lt;button aria-label="Add Attendee Button" id="updateDetails"&gt;Add Attendee&lt;/button&gt;
  &lt;/p&gt;
--&gt;&lt;output
&gt;&lt;/output
&gt;&lt;!-- @end Unregister modal --&gt;
My Student Application</searchcontent>
  <statecode>0</statecode>
  <statuscode>1</statuscode>
</powerpagecomponent>